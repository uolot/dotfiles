#!/usr/bin/env bash

# active_sink=$(pacmd list-sinks |awk '/* index:/{print $3}')
active_sink=0

get_volume() {
    pactl get-sink-volume "$active_sink" | head -1 | awk '{print $5}' | tr -d %
}

case $1 in
up)
    pactl set-sink-volume "$active_sink" +2db
    get_volume
    ;;
down)
    pactl set-sink-volume "$active_sink" -2db
    get_volume
    ;;
set)
    pactl set-sink-volume "$active_sink" "$(echo "$2" | tr -d %)%"
    get_volume
    ;;
toggle)
    pactl set-sink-mute "$active_sink" toggle
    vol=$(get_volume)
    pactl get-sink-mute 0 | awk '{print ($2 == "yes") ? '"$vol"' : -1}'
    ;;
esac
